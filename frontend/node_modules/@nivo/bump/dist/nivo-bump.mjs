import{useState as i,useMemo as e,useCallback as t,createElement as o,memo as n,forwardRef as r,Fragment as a}from"react";import{useMotionConfig as d,useAnimatedPath as l,Container as c,useDimensions as s,SvgWrapper as u,ResponsiveWrapper as v,bindDefs as p}from"@nivo/core";import{Grid as h,Axes as f}from"@nivo/axes";import{line as g,curveBasis as y,curveLinear as b,area as m}from"d3-shape";import{useTheme as x}from"@nivo/theming";import{useOrdinalColorScale as M,useInheritedColor as W}from"@nivo/colors";import{useTooltip as P,BasicTooltip as O}from"@nivo/tooltip";import{scalePoint as L,scaleLinear as C}from"d3-scale";import{castPointScale as S,castLinearScale as I}from"@nivo/scales";import{jsx as B,jsxs as k,Fragment as w}from"react/jsx-runtime";import{useSpring as A,animated as z,to as E,useSprings as T}from"@react-spring/web";import{Text as D}from"@nivo/text";import{Mesh as G}from"@nivo/voronoi";function F(){return F=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)({}).hasOwnProperty.call(t,o)&&(i[o]=t[o])}return i},F.apply(null,arguments)}function R(i,e){if(null==i)return{};var t={};for(var o in i)if({}.hasOwnProperty.call(i,o)){if(-1!==e.indexOf(o))continue;t[o]=i[o]}return t}var H=function(i){return e((function(){return"function"==typeof i?i:function(){return i}}),[i])},U=function(o){var n=o.width,r=o.height,a=o.data,d=o.interpolation,l=o.xPadding,c=o.xOuterPadding,s=o.yOuterPadding,u=o.lineWidth,v=o.activeLineWidth,p=o.inactiveLineWidth,h=o.colors,f=o.opacity,m=o.activeOpacity,P=o.inactiveOpacity,O=o.pointSize,C=o.activePointSize,I=o.inactivePointSize,B=o.pointColor,k=o.pointBorderWidth,w=o.activePointBorderWidth,A=o.inactivePointBorderWidth,z=o.pointBorderColor,E=o.isInteractive,T=o.defaultActiveSerieIds,D=i(T),G=D[0],R=D[1],U=i(T),X=U[0],j=U[1],Y=e((function(){return function(i){var e=i.width,t=i.height,o=i.data,n=i.xPadding,r=i.xOuterPadding,a=i.yOuterPadding,d=new Set,l=new Set;o.forEach((function(i){i.data.forEach((function(i){d.add(i.x),null!==i.y&&l.add(i.y)}))}));var c=Array.from(d),s=S(L().domain(c).range([0,e]).padding(r)),u=Array.from(l).sort((function(i,e){return i-e})),v=S(L().domain(u).range([0,t]).padding(a)),p=s.step()*Math.min(.5*n,.5);return{series:o.map((function(i){var t={id:i.id,data:i,points:[],linePoints:[]};return i.data.forEach((function(o,n){var r=null,a=null;null!==o.y&&(r=s(o.x),a=v(o.y));var d={id:i.id+"."+n,serie:i,data:o,x:r,y:a};t.points.push(d),null!==d.x&&(0===n?t.linePoints.push([0,d.y]):t.linePoints.push([d.x-p,d.y])),t.linePoints.push([d.x,d.y]),null!==r&&(n===i.data.length-1&&r?t.linePoints.push([e,d.y]):t.linePoints.push([d.x+p,d.y])),t.points=t.points.filter((function(i){return null!==i.x}))})),t})),xScale:s,yScale:v}}({width:n,height:r,data:a,xPadding:l,xOuterPadding:c,yOuterPadding:s})}),[n,r,a,l,c,s]),K=Y.series,q=Y.xScale,J=Y.yScale,N=function(i){return e((function(){return g().curve("smooth"===i?y:b).defined((function(i){return null!==i[0]&&null!==i[1]}))}),[i])}(d),Q=M(h,"id"),V=function(i){var e=i.lineWidth,o=i.activeLineWidth,n=i.inactiveLineWidth,r=i.opacity,a=i.activeOpacity,d=i.inactiveOpacity,l=i.isInteractive,c=i.activeSerieIds,s=H(e),u=H(o),v=H(n),p=H(r),h=H(a),f=H(d),g=t((function(i){return{opacity:p(i),lineWidth:s(i)}}),[s,p]),y=t((function(i){return{opacity:h(i),lineWidth:u(i)}}),[u,h]),b=t((function(i){return{opacity:f(i),lineWidth:v(i)}}),[v,f]);return t((function(i){return l&&0!==c.length?c.includes(i.id)?y(i):b(i):g(i)}),[g,y,b,l,c])}({lineWidth:u,activeLineWidth:v,inactiveLineWidth:p,opacity:f,activeOpacity:m,inactiveOpacity:P,isInteractive:E,activeSerieIds:G}),Z=e((function(){return K.map((function(i){return F({},i,{color:Q(i.data)},V(i))}))}),[K,Q,V]),$=x(),_=W(B,$),ii=W(z,$),ei=function(i){var e=i.pointSize,o=i.activePointSize,n=i.inactivePointSize,r=i.pointBorderWidth,a=i.activePointBorderWidth,d=i.inactivePointBorderWidth,l=i.isInteractive,c=i.activePointIds,s=H(e),u=H(o),v=H(n),p=H(r),h=H(a),f=H(d),g=t((function(i){return{size:s(i),borderWidth:p(i)}}),[s,p]),y=t((function(i){return{size:u(i),borderWidth:h(i)}}),[u,h]),b=t((function(i){return{size:v(i),borderWidth:f(i)}}),[v,f]);return t((function(i){return l&&0!==c.length?c.includes(i.id)?y(i):b(i):g(i)}),[g,y,b,l,c])}({pointSize:O,activePointSize:C,inactivePointSize:I,pointBorderWidth:k,activePointBorderWidth:w,inactivePointBorderWidth:A,isInteractive:E,activePointIds:X}),ti=e((function(){var i=[];return Z.forEach((function(e){e.points.forEach((function(t){var o=F({},t,{serie:e,isActive:G.includes(e.id),isInactive:G.length>0&&!G.includes(e.id)});o.color=_(o),o.borderColor=ii(o),i.push(F({},o,ei(o)))}))})),i}),[Z,G,_,ii,ei]);return{xScale:q,yScale:J,series:Z,points:ti,lineGenerator:N,activeSerieIds:G,setActiveSerieIds:R,activePointIds:X,setActivePointIds:j}},X=function(i){var n=i.serie,r=i.isInteractive,a=i.onMouseEnter,d=i.onMouseMove,l=i.onMouseLeave,c=i.onMouseDown,s=i.onMouseUp,u=i.onClick,v=i.onDoubleClick,p=i.setActiveSerieIds,h=i.lineTooltip,f=P(),g=f.showTooltipFromEvent,y=f.hideTooltip,b=t((function(i){g(o(h,{serie:n}),i),p([n.id]),null==a||a(n,i)}),[n,a,g,p,h]),m=t((function(i){g(o(h,{serie:n}),i),null==d||d(n,i)}),[n,d,g,h]),x=t((function(i){y(),p([]),null==l||l(n,i)}),[n,l,y,p]),M=t((function(i){null==c||c(n,i)}),[n,c]),W=t((function(i){null==s||s(n,i)}),[n,s]),O=t((function(i){null==u||u(n,i)}),[n,u]),L=t((function(i){null==v||v(n,i)}),[n,v]);return e((function(){return{onMouseEnter:r?b:void 0,onMouseMove:r?m:void 0,onMouseLeave:r?x:void 0,onMouseDown:r?M:void 0,onMouseUp:r?W:void 0,onClick:r?O:void 0,onDoubleClick:r?L:void 0}}),[r,b,m,x,M,W,O,L])},j=function(i){var n=i.point,r=i.isInteractive,a=i.onMouseEnter,d=i.onMouseMove,l=i.onMouseLeave,c=i.onMouseDown,s=i.onMouseUp,u=i.onClick,v=i.onDoubleClick,p=i.setActivePointIds,h=i.setActiveSerieIds,f=i.pointTooltip,g=P(),y=g.showTooltipFromEvent,b=g.hideTooltip,m=t((function(i){y(o(f,{point:n}),i),p([n.id]),h([n.serie.id]),null==a||a(n,i)}),[y,f,n,p,h,a]),x=t((function(i){y(o(f,{point:n}),i),null==d||d(n,i)}),[y,f,n,d]),M=t((function(i){b(),p([]),h([]),null==l||l(n,i)}),[b,p,h,l,n]),W=t((function(i){null==c||c(n,i)}),[n,c]),O=t((function(i){null==s||s(n,i)}),[n,s]),L=t((function(i){null==u||u(n,i)}),[n,u]),C=t((function(i){null==v||v(n,i)}),[n,v]);return e((function(){return{onMouseEnter:r?m:void 0,onMouseMove:r?x:void 0,onMouseLeave:r?M:void 0,onMouseDown:r?W:void 0,onMouseUp:r?O:void 0,onClick:r?L:void 0,onDoubleClick:r?C:void 0}}),[r,m,x,M,W,O,L,C])},Y=function(i){var t=i.series,o=i.position,n=i.padding,r=i.color,a=i.getLabel,d=x(),l=W(r,d);return e((function(){var i,e;"start"===o?(i="end",e=-1*n):(i="start",e=n);var r=[];return t.forEach((function(t){var n=t.id;"function"==typeof a&&(n=a(t.data));var d="start"===o?t.linePoints[0]:t.linePoints[t.linePoints.length-1];null!==(null==d?void 0:d[0])&&null!==(null==d?void 0:d[1])&&r.push({id:t.id,label:n,x:d[0]+e,y:d[1],color:l(t),opacity:t.opacity,serie:t,textAnchor:i})})),r}),[t,o,n,l,a])},K={pointerEvents:"none"},q=F({},{layers:["grid","axes","labels","lines","points","mesh"],interpolation:"smooth",xPadding:.6,xOuterPadding:.5,yOuterPadding:.5,colors:{scheme:"nivo"},lineWidth:2,activeLineWidth:4,inactiveLineWidth:1,opacity:1,activeOpacity:1,inactiveOpacity:.3,startLabel:!1,startLabelPadding:16,startLabelTextColor:{from:"color"},endLabel:!0,endLabelPadding:16,endLabelTextColor:{from:"color"},pointSize:6,activePointSize:8,inactivePointSize:4,pointColor:{from:"serie.color"},pointBorderWidth:0,activePointBorderWidth:0,inactivePointBorderWidth:0,pointBorderColor:{from:"serie.color",modifiers:[["darker",1.4]]},enableGridX:!0,enableGridY:!0,axisTop:{},axisRight:null,axisBottom:{},axisLeft:{},isInteractive:!0,defaultActiveSerieIds:[],lineTooltip:function(i){var e=i.serie;return B(O,{"data-testid":"tooltip."+e.data.id,id:e.data.id,enableChip:!0,color:e.color})},pointTooltip:n((function(i){var e=i.point;return B(O,{id:k("span",{children:["x: ",B("strong",{children:e.data.x}),", y: ",B("strong",{children:e.data.y})]}),enableChip:!0,color:e.serie.color})})),useMesh:!1,debugMesh:!1,role:"img",renderWrapper:!0},{pointComponent:function(i){var e=i.point,t=d(),o=t.animate,n=t.config,r=A({x:e.x,y:e.y,radius:e.size/2,color:e.color,borderWidth:e.borderWidth,config:n,immediate:!o});return B(z.circle,{"data-testid":"point."+e.serie.id+"."+e.data.x,cx:r.x,cy:r.y,r:E(r.radius,(function(i){return Math.max(i,0)})),fill:r.color,strokeWidth:r.borderWidth,stroke:e.borderColor,style:K})},animate:!0,motionConfig:"gentle"}),J=function(i){var e=i.serie,t=i.lineGenerator,o=i.yStep,n=i.isInteractive,r=i.onMouseEnter,a=i.onMouseMove,c=i.onMouseLeave,s=i.onMouseDown,u=i.onMouseUp,v=i.onClick,p=i.onDoubleClick,h=i.setActiveSerieIds,f=i.lineTooltip,g=i.useMesh,y=X({serie:e,isInteractive:n,onMouseEnter:r,onMouseMove:a,onMouseLeave:c,onMouseDown:s,onMouseUp:u,onClick:v,onDoubleClick:p,setActiveSerieIds:h,lineTooltip:f}),b=d(),m=b.animate,x=b.config,M=t(e.linePoints)||"",W=l(M),P=A({color:e.color,opacity:e.opacity,lineWidth:e.lineWidth,config:x,immediate:!m});return k(w,{children:[B(z.path,{"data-testid":"line."+e.id,fill:"none",d:W,stroke:P.color,strokeWidth:P.lineWidth,strokeLinecap:"round",strokeOpacity:P.opacity,style:{pointerEvents:"none"}}),n&&!g&&B("path",{"data-testid":"line."+e.id+".interactive",fill:"none",stroke:"red",strokeOpacity:0,strokeWidth:o,d:M,strokeLinecap:"butt",onMouseEnter:y.onMouseEnter,onMouseMove:y.onMouseMove,onMouseLeave:y.onMouseLeave,onMouseDown:y.onMouseDown,onMouseUp:y.onMouseUp,onClick:y.onClick,onDoubleClick:y.onDoubleClick})]})},N=function(i){var e=i.series,t=i.getLabel,o=i.position,n=i.padding,r=i.color,a=x(),l=d(),c=l.animate,s=l.config,u=Y({series:e,getLabel:t,position:o,padding:n,color:r}),v=T(u.length,u.map((function(i){return{x:i.x,y:i.y,opacity:i.opacity,config:s,immediate:!c}})));return B(w,{children:v.map((function(i,e){var t=u[e];return B(D,{"data-testid":"label."+o+"."+t.serie.id,x:i.x,y:i.y,textAnchor:t.textAnchor,dominantBaseline:"central",opacity:i.opacity,style:F({},a.labels.text,{fill:t.color}),children:t.label},t.id)}))})},Q=n((function(i){var e=i.points,n=i.width,r=i.height,a=i.margin,d=i.setActivePointIds,l=i.setActiveSerieIds,c=i.onMouseEnter,s=i.onMouseMove,u=i.onMouseLeave,v=i.onMouseDown,p=i.onMouseUp,h=i.onClick,f=i.onDoubleClick,g=i.tooltip,y=i.debug,b=P(),m=b.showTooltipAt,x=b.hideTooltip,M=t((function(i,e){var t;m(o(g,{point:i}),[i.x+a.left,null!=(t=i.y)?t:0+a.top],"top"),d([i.id]),l([i.serie.id]),null==c||c(i,e)}),[m,g,a.left,a.top,d,l,c]),W=t((function(i,e){var t;m(o(g,{point:i}),[i.x+a.left,null!=(t=i.y)?t:0+a.top],"top"),d([i.id]),l([i.serie.id]),null==s||s(i,e)}),[m,g,a.left,a.top,d,l,s]),O=t((function(i,e){x(),d([]),l([]),null==u||u(i,e)}),[x,u,d,l]),L=t((function(i,e){null==v||v(i,e)}),[v]),C=t((function(i,e){null==p||p(i,e)}),[p]),S=t((function(i,e){null==h||h(i,e)}),[h]),I=t((function(i,e){null==f||f(i,e)}),[f]);return B(G,{nodes:e,width:n,height:r,onMouseEnter:M,onMouseMove:W,onMouseLeave:O,onMouseDown:L,onMouseUp:C,onClick:S,onDoubleClick:I,debug:y})})),V=["isInteractive","animate","motionConfig","theme","renderWrapper"],Z=function(i){var t=i.data,n=i.width,r=i.height,d=i.margin,l=i.layers,c=void 0===l?q.layers:l,v=i.interpolation,p=void 0===v?q.interpolation:v,g=i.xPadding,y=void 0===g?q.xPadding:g,b=i.xOuterPadding,m=void 0===b?q.xOuterPadding:b,x=i.yOuterPadding,M=void 0===x?q.yOuterPadding:x,W=i.colors,P=void 0===W?q.colors:W,O=i.lineWidth,L=void 0===O?q.lineWidth:O,C=i.activeLineWidth,S=void 0===C?q.activeLineWidth:C,I=i.inactiveLineWidth,w=void 0===I?q.inactiveLineWidth:I,A=i.opacity,z=void 0===A?q.opacity:A,E=i.activeOpacity,T=void 0===E?q.activeOpacity:E,D=i.inactiveOpacity,G=void 0===D?q.inactiveOpacity:D,F=i.startLabel,R=void 0===F?q.startLabel:F,H=i.startLabelPadding,X=void 0===H?q.startLabelPadding:H,j=i.startLabelTextColor,Y=void 0===j?q.startLabelTextColor:j,K=i.endLabel,V=void 0===K?q.endLabel:K,Z=i.endLabelPadding,$=void 0===Z?q.endLabelPadding:Z,_=i.endLabelTextColor,ii=void 0===_?q.endLabelTextColor:_,ei=i.pointComponent,ti=void 0===ei?q.pointComponent:ei,oi=i.pointSize,ni=void 0===oi?q.pointSize:oi,ri=i.activePointSize,ai=void 0===ri?q.activePointSize:ri,di=i.inactivePointSize,li=void 0===di?q.inactivePointSize:di,ci=i.pointColor,si=void 0===ci?q.pointColor:ci,ui=i.pointBorderWidth,vi=void 0===ui?q.pointBorderWidth:ui,pi=i.activePointBorderWidth,hi=void 0===pi?q.activePointBorderWidth:pi,fi=i.inactivePointBorderWidth,gi=void 0===fi?q.inactivePointBorderWidth:fi,yi=i.pointBorderColor,bi=void 0===yi?q.pointBorderColor:yi,mi=i.enableGridX,xi=void 0===mi?q.enableGridX:mi,Mi=i.enableGridY,Wi=void 0===Mi?q.enableGridY:Mi,Pi=i.axisTop,Oi=void 0===Pi?q.axisTop:Pi,Li=i.axisRight,Ci=i.axisBottom,Si=void 0===Ci?q.axisBottom:Ci,Ii=i.axisLeft,Bi=void 0===Ii?q.axisLeft:Ii,ki=i.isInteractive,wi=void 0===ki?q.isInteractive:ki,Ai=i.defaultActiveSerieIds,zi=void 0===Ai?q.defaultActiveSerieIds:Ai,Ei=i.onMouseEnter,Ti=i.onMouseMove,Di=i.onMouseLeave,Gi=i.onMouseDown,Fi=i.onMouseUp,Ri=i.onClick,Hi=i.onDoubleClick,Ui=i.useMesh,Xi=void 0===Ui?q.useMesh:Ui,ji=i.debugMesh,Yi=void 0===ji?q.debugMesh:ji,Ki=i.lineTooltip,qi=void 0===Ki?q.lineTooltip:Ki,Ji=i.pointTooltip,Ni=void 0===Ji?q.pointTooltip:Ji,Qi=i.role,Vi=void 0===Qi?q.role:Qi,Zi=i.forwardedRef,$i=s(n,r,d),_i=$i.margin,ie=$i.innerWidth,ee=$i.innerHeight,te=$i.outerWidth,oe=$i.outerHeight,ne=U({width:ie,height:ee,data:t,interpolation:p,xPadding:y,xOuterPadding:m,yOuterPadding:M,lineWidth:L,activeLineWidth:S,inactiveLineWidth:w,colors:P,opacity:z,activeOpacity:T,inactiveOpacity:G,pointSize:ni,activePointSize:ai,inactivePointSize:li,pointColor:si,pointBorderWidth:vi,activePointBorderWidth:hi,inactivePointBorderWidth:gi,pointBorderColor:bi,isInteractive:wi,defaultActiveSerieIds:zi}),re=ne.series,ae=ne.points,de=ne.xScale,le=ne.yScale,ce=ne.lineGenerator,se=ne.activePointIds,ue=ne.activeSerieIds,ve=ne.setActiveSerieIds,pe=ne.setActivePointIds,he={grid:null,axes:null,labels:null,lines:null,points:null,mesh:null};c.includes("grid")&&(he.grid=B(h,{width:ie,height:ee,xScale:xi?de:null,yScale:Wi?le:null},"grid")),c.includes("axes")&&(he.axes=B(f,{xScale:de,yScale:le,width:ie,height:ee,top:Oi,right:Li,bottom:Si,left:Bi},"axes")),c.includes("lines")&&(he.lines=B(a,{children:re.map((function(i){return B(J,{serie:i,setActiveSerieIds:ve,lineGenerator:ce,yStep:le.step(),isInteractive:wi,onMouseEnter:Ei,onMouseMove:Ti,onMouseLeave:Di,onMouseDown:Gi,onMouseUp:Fi,onClick:Ri,onDoubleClick:Hi,lineTooltip:qi,useMesh:Xi},i.id)}))},"lines")),wi&&Xi&&c.includes("mesh")&&(he.mesh=B(Q,{points:ae,width:ie,height:ee,margin:_i,setActivePointIds:pe,setActiveSerieIds:ve,onMouseEnter:Ei,onMouseMove:Ti,onMouseLeave:Di,onMouseDown:Gi,onMouseUp:Fi,onClick:Ri,onDoubleClick:Hi,tooltip:Ni,debug:Yi},"mesh")),c.includes("points")&&(he.points=ae.map((function(i){return o(ti,{key:i.id,point:i})}))),c.includes("labels")&&(he.labels=k(a,{children:[!1!==R&&B(N,{series:re,getLabel:R,position:"start",padding:X,color:Y}),!1!==V&&B(N,{series:re,getLabel:V,position:"end",padding:$,color:ii})]},"legends"));var fe=e((function(){return{innerHeight:ee,innerWidth:ie,lineGenerator:ce,points:ae,series:re,xScale:de,yScale:le,activeSerieIds:ue,activePointIds:se,setActiveSerieIds:ve,setActivePointIds:pe}}),[se,ue,pe,ve,ee,ie,ce,ae,re,de,le]);return B(u,{width:te,height:oe,margin:_i,role:Vi,ref:Zi,children:c.map((function(i,e){var t;return"function"==typeof i?B(a,{children:o(i,fe)},e):null!=(t=null==he?void 0:he[i])?t:null}))})},$=r((function(i,e){var t=i.isInteractive,o=void 0===t?q.isInteractive:t,n=i.animate,r=void 0===n?q.animate:n,a=i.motionConfig,d=void 0===a?q.motionConfig:a,l=i.theme,s=i.renderWrapper,u=R(i,V);return B(c,{animate:r,isInteractive:o,motionConfig:d,renderWrapper:s,theme:l,children:B(Z,F({isInteractive:o},u,{forwardedRef:e}))})})),_=["defaultWidth","defaultHeight","onResize","debounceResize"],ii=r((function(i,e){var t=i.defaultWidth,o=i.defaultHeight,n=i.onResize,r=i.debounceResize,a=R(i,_);return B(v,{defaultWidth:t,defaultHeight:o,onResize:n,debounceResize:r,children:function(i){var t=i.width,o=i.height;return B($,F({width:t,height:o},a,{ref:e}))}})})),ei=function(i){return"serie"in i},ti=function(i){return"points"in i},oi=function(i){var t=i.data,o=i.width,n=i.height,r=i.align,a=i.spacing,d=i.xPadding;return e((function(){return function(i){var e,t,o=i.data,n=i.width,r=i.height,a=i.align,d=i.spacing,l=i.xPadding,c=new Map;o.forEach((function(i){i.data.forEach((function(o){c.has(o.x)||c.set(o.x,{id:o.x,total:0,values:new Map,x:0});var n=c.get(o.x),r=n.total+o.y;n.total=r,n.values.set(i.id,{serieId:i.id,value:o.y,position:0,height:0,beforeHeight:0}),(void 0===e||r>e)&&(e=r),(void 0===t||n.values.size>t)&&(t=n.values.size)}))}));var s=S(L().domain(Array.from(c.keys())).range([0,n])),u=I(C().domain([0,e]).range([0,r-t*d]));c.forEach((function(i,e){i.x=s(e);var t=u(i.total)+i.values.size*d,o=0;"middle"===a?o=(r-t)/2:"end"===a&&(o=r-t),Array.from(i.values.values()).sort((function(i,e){return e.value-i.value})).forEach((function(e,t,n){var r=n.filter((function(i,e){return e<t})),a=r.reduce((function(i,e){return i+e.value}),0),l=i.values.get(e.serieId);l.position=t,l.height=u(e.value),l.beforeHeight=u(a)+o+d*(r.length+.5)}))}));var v=s.step()*Math.min(.5*l,.5),p=o.map((function(i){var e={id:i.id,data:i,points:[],areaPoints:[]};return i.data.forEach((function(t,o){var n=c.get(t.x),r=n.values.get(i.id),a=n.x,d=r.beforeHeight,l=r.height,s=d+l/2,u=d,p=d+l;e.points.push({x:a,y:s,height:l,data:F({},t)}),o>0&&e.areaPoints.push({x:a-v,y0:u,y1:p}),e.areaPoints.push({x:a,y0:u,y1:p}),o<i.data.length-1&&e.areaPoints.push({x:a+v,y0:u,y1:p})})),e}));return{series:p,xScale:s,heightScale:u}}({data:t,width:o,height:n,align:r,spacing:a,xPadding:d})}),[t,o,n,r,a,d])},ni=function(i){return e((function(){return"function"==typeof i?i:function(){return i}}),[i])},ri=function(o){var n=o.data,r=o.width,a=o.height,d=o.align,l=o.spacing,c=o.xPadding,s=o.interpolation,u=o.colors,v=o.fillOpacity,p=o.activeFillOpacity,h=o.inactiveFillOpacity,f=o.borderWidth,g=o.activeBorderWidth,P=o.inactiveBorderWidth,O=o.borderColor,L=o.borderOpacity,C=o.activeBorderOpacity,S=o.inactiveBorderOpacity,I=o.isInteractive,B=o.defaultActiveSerieIds,k=i(B),w=k[0],A=k[1],z=oi({data:n,width:r,height:a,align:d,spacing:l,xPadding:c}),E=z.series,T=z.xScale,D=z.heightScale,G=function(i){return e((function(){return m().x((function(i){return i.x})).y0((function(i){return i.y0})).y1((function(i){return i.y1})).curve("smooth"===i?y:b)}),[i])}(s),R=M(u,"id"),H=function(i){var e=i.fillOpacity,o=i.activeFillOpacity,n=i.inactiveFillOpacity,r=i.borderWidth,a=i.activeBorderWidth,d=i.inactiveBorderWidth,l=i.borderColor,c=i.borderOpacity,s=i.activeBorderOpacity,u=i.inactiveBorderOpacity,v=i.isInteractive,p=i.activeSerieIds,h=ni(e),f=ni(o),g=ni(n),y=ni(r),b=ni(a),m=ni(d),M=x(),P=W(l,M),O=ni(c),L=ni(s),C=ni(u),S=t((function(i){return{fillOpacity:h(i),borderWidth:y(i),borderColor:P(i),borderOpacity:O(i)}}),[h,y,P,O]),I=t((function(i){return{fillOpacity:f(i),borderWidth:b(i),borderColor:P(i),borderOpacity:L(i)}}),[f,b,P,L]),B=t((function(i){return{fillOpacity:g(i),borderWidth:m(i),borderColor:P(i),borderOpacity:C(i)}}),[g,m,P,C]);return t((function(i){return v&&0!==p.length?p.includes(i.id)?I(i):B(i):S(i)}),[S,I,B,v,p])}({fillOpacity:v,activeFillOpacity:p,inactiveFillOpacity:h,borderWidth:f,activeBorderWidth:g,inactiveBorderWidth:P,borderColor:O,borderOpacity:L,activeBorderOpacity:C,inactiveBorderOpacity:S,isInteractive:I,activeSerieIds:w});return{series:e((function(){return E.map((function(i){var e=F({},i,{color:R(i.data)});return F({},e,H(e))}))}),[E,R,H]),xScale:T,heightScale:D,areaGenerator:G,activeSerieIds:w,setActiveSerieIds:A}},ai=function(i){var n=i.serie,r=i.isInteractive,a=i.onMouseEnter,d=i.onMouseMove,l=i.onMouseLeave,c=i.onClick,s=i.setActiveSerieIds,u=i.tooltip,v=P(),p=v.showTooltipFromEvent,h=v.hideTooltip,f=t((function(i){p(o(u,{serie:n}),i),s([n.id]),null==a||a(n,i)}),[n,a,p,s,u]),g=t((function(i){p(o(u,{serie:n}),i),null==d||d(n,i)}),[n,d,p,u]),y=t((function(i){h(),s([]),null==l||l(n,i)}),[n,l,h,s]),b=t((function(i){null==c||c(n,i)}),[n,c]);return e((function(){return{onMouseEnter:r?f:void 0,onMouseMove:r?g:void 0,onMouseLeave:r?y:void 0,onClick:r?b:void 0}}),[r,f,g,y,b])},di=function(i){var t=i.series,o=i.position,n=i.padding,r=i.color,a=i.getLabel,d=x(),l=W(r,d);return e((function(){var i,e;return"start"===o?(i="end",e=-1*n):(i="start",e=n),t.map((function(t){var n=t.id;"function"==typeof a&&(n=a(t.data));var r="start"===o?t.points[0]:t.points[t.points.length-1];return{id:t.id,label:n,x:r.x+e,y:r.y,color:l(t),opacity:t.fillOpacity,serie:t,textAnchor:i}}))}),[a,t,o,n,l])},li=function(i){var e=i.serie,t=i.areaGenerator,o=i.blendMode,n=i.isInteractive,r=i.onMouseEnter,a=i.onMouseMove,c=i.onMouseLeave,s=i.onClick,u=i.setActiveSerieIds,v=i.tooltip,p=ai({serie:e,isInteractive:n,onMouseEnter:r,onMouseMove:a,onMouseLeave:c,onClick:s,setActiveSerieIds:u,tooltip:v}),h=d(),f=h.animate,g=h.config,y=l(t(e.areaPoints)||""),b=A({color:e.color,fillOpacity:e.fillOpacity,stroke:e.borderColor,strokeOpacity:e.borderOpacity,config:g,immediate:!f});return B(z.path,{"data-testid":"area."+e.id,d:y,fill:e.fill?e.fill:b.color,fillOpacity:b.fillOpacity,stroke:b.stroke,strokeWidth:e.borderWidth,strokeOpacity:b.strokeOpacity,style:{mixBlendMode:o},onMouseEnter:p.onMouseEnter,onMouseMove:p.onMouseMove,onMouseLeave:p.onMouseLeave,onClick:p.onClick})},ci=function(i){var e=i.getLabel,t=i.series,o=i.position,n=i.padding,r=i.color,a=x(),l=d(),c=l.animate,s=l.config,u=di({getLabel:e,series:t,position:o,padding:n,color:r}),v=T(u.length,u.map((function(i){return{x:i.x,y:i.y,opacity:i.opacity,config:s,immediate:!c}})));return B(w,{children:v.map((function(i,e){var t=u[e];return B(D,{"data-testid":"label."+o+"."+t.serie.id,x:i.x,y:i.y,textAnchor:t.textAnchor,dominantBaseline:"central",opacity:i.opacity,style:F({},a.labels.text,{fill:t.color}),children:t.label},t.id)}))})},si=F({},{align:"middle",layers:["grid","axes","labels","areas"],interpolation:"smooth",spacing:0,xPadding:.6,colors:{scheme:"nivo"},blendMode:"normal",fillOpacity:.8,activeFillOpacity:1,inactiveFillOpacity:.15,borderWidth:1,activeBorderWidth:1,inactiveBorderWidth:0,borderColor:{from:"color",modifiers:[["darker",.4]]},borderOpacity:1,activeBorderOpacity:1,inactiveBorderOpacity:0,startLabel:!0,startLabelPadding:12,startLabelTextColor:{from:"color",modifiers:[["darker",1]]},endLabel:!0,endLabelPadding:12,endLabelTextColor:{from:"color",modifiers:[["darker",1]]},enableGridX:!0,axisTop:{},axisBottom:{},isInteractive:!0,defaultActiveSerieIds:[],tooltip:function(i){var e=i.serie;return B(O,{id:e.id,enableChip:!0,color:e.color})},role:"img"},{defs:[],fill:[],animate:!0,motionConfig:"gentle"}),ui=["isInteractive","animate","motionConfig","theme","renderWrapper"],vi=function(i){var t=i.data,n=i.align,r=void 0===n?si.align:n,d=i.width,l=i.height,c=i.margin,v=i.layers,g=void 0===v?si.layers:v,y=i.interpolation,b=void 0===y?si.interpolation:y,m=i.spacing,x=void 0===m?si.spacing:m,M=i.xPadding,W=void 0===M?si.xPadding:M,P=i.colors,O=void 0===P?si.colors:P,L=i.blendMode,C=void 0===L?si.blendMode:L,S=i.fillOpacity,I=void 0===S?si.fillOpacity:S,w=i.activeFillOpacity,A=void 0===w?si.activeFillOpacity:w,z=i.inactiveFillOpacity,E=void 0===z?si.inactiveFillOpacity:z,T=i.defs,D=void 0===T?si.defs:T,G=i.fill,F=void 0===G?si.fill:G,R=i.borderWidth,H=void 0===R?si.borderWidth:R,U=i.activeBorderWidth,X=void 0===U?si.activeBorderWidth:U,j=i.inactiveBorderWidth,Y=void 0===j?si.inactiveBorderWidth:j,K=i.borderColor,q=void 0===K?si.borderColor:K,J=i.borderOpacity,N=void 0===J?si.borderOpacity:J,Q=i.activeBorderOpacity,V=void 0===Q?si.activeBorderOpacity:Q,Z=i.inactiveBorderOpacity,$=void 0===Z?si.inactiveBorderOpacity:Z,_=i.startLabel,ii=void 0===_?si.startLabel:_,ei=i.startLabelPadding,ti=void 0===ei?si.startLabelPadding:ei,oi=i.startLabelTextColor,ni=void 0===oi?si.startLabelTextColor:oi,ai=i.endLabel,di=void 0===ai?si.endLabel:ai,ui=i.endLabelPadding,vi=void 0===ui?si.endLabelPadding:ui,pi=i.endLabelTextColor,hi=void 0===pi?si.endLabelTextColor:pi,fi=i.enableGridX,gi=void 0===fi?si.enableGridX:fi,yi=i.axisTop,bi=void 0===yi?si.axisTop:yi,mi=i.axisBottom,xi=void 0===mi?si.axisBottom:mi,Mi=i.isInteractive,Wi=void 0===Mi?si.isInteractive:Mi,Pi=i.defaultActiveSerieIds,Oi=void 0===Pi?si.defaultActiveSerieIds:Pi,Li=i.onMouseEnter,Ci=i.onMouseMove,Si=i.onMouseLeave,Ii=i.onClick,Bi=i.tooltip,ki=void 0===Bi?si.tooltip:Bi,wi=i.role,Ai=void 0===wi?si.role:wi,zi=i.forwardedRef,Ei=s(d,l,c),Ti=Ei.margin,Di=Ei.innerWidth,Gi=Ei.innerHeight,Fi=Ei.outerWidth,Ri=Ei.outerHeight,Hi=ri({data:t,width:Di,height:Gi,align:r,spacing:x,xPadding:W,interpolation:b,colors:O,fillOpacity:I,activeFillOpacity:A,inactiveFillOpacity:E,borderWidth:H,activeBorderWidth:X,inactiveBorderWidth:Y,borderColor:q,borderOpacity:N,activeBorderOpacity:V,inactiveBorderOpacity:$,isInteractive:Wi,defaultActiveSerieIds:Oi}),Ui=Hi.series,Xi=Hi.xScale,ji=Hi.heightScale,Yi=Hi.areaGenerator,Ki=Hi.setActiveSerieIds,qi=e((function(){return p(D,Ui,F,{targetKey:"fill"})}),[D,Ui,F]),Ji={grid:null,axes:null,labels:null,areas:null};g.includes("grid")&&gi&&(Ji.grid=B(h,{width:Di,height:Gi,xScale:Xi},"grid")),g.includes("axes")&&(Ji.axes=B(f,{xScale:Xi,yScale:ji,width:Di,height:Gi,top:bi,bottom:xi},"axes")),g.includes("areas")&&(Ji.areas=B(a,{children:Ui.map((function(i){return B(li,{areaGenerator:Yi,serie:i,blendMode:C,isInteractive:Wi,setActiveSerieIds:Ki,onMouseEnter:Li,onMouseMove:Ci,onMouseLeave:Si,onClick:Ii,tooltip:ki},i.id)}))},"areas")),g.includes("labels")&&(Ji.labels=k(a,{children:[!1!==ii&&B(ci,{getLabel:ii,series:Ui,position:"start",padding:ti,color:ni}),!1!==di&&B(ci,{getLabel:di,series:Ui,position:"end",padding:vi,color:hi})]},"labels"));var Ni=e((function(){return{innerWidth:Di,innerHeight:Gi,outerWidth:Fi,outerHeight:Ri,series:Ui,xScale:Xi,areaGenerator:Yi}}),[Di,Gi,Fi,Ri,Ui,Xi,Yi]);return B(u,{defs:qi,width:Fi,height:Ri,margin:Ti,role:Ai,ref:zi,children:g.map((function(i,e){var t;return"function"==typeof i?B(a,{children:o(i,Ni)},e):null!=(t=null==Ji?void 0:Ji[i])?t:null}))})},pi=r((function(i,e){var t=i.isInteractive,o=void 0===t?si.isInteractive:t,n=i.animate,r=void 0===n?si.animate:n,a=i.motionConfig,d=void 0===a?si.motionConfig:a,l=i.theme,s=i.renderWrapper,u=R(i,ui);return B(c,{animate:r,isInteractive:o,motionConfig:d,renderWrapper:s,theme:l,children:B(vi,F({isInteractive:o},u,{forwardedRef:e}))})})),hi=["defaultWidth","defaultHeight","onResize","debounceResize"],fi=r((function(i,e){var t=i.defaultWidth,o=i.defaultHeight,n=i.onResize,r=i.debounceResize,a=R(i,hi);return B(v,{defaultWidth:t,defaultHeight:o,onResize:n,debounceResize:r,children:function(i){var t=i.width,o=i.height;return B(pi,F({width:t,height:o},a,{ref:e}))}})}));export{pi as AreaBump,$ as Bump,fi as ResponsiveAreaBump,ii as ResponsiveBump,si as areaBumpSvgDefaultProps,q as bumpSvgDefaultProps,ei as isBumpPoint,ti as isComputedBumpSerie,ri as useAreaBump,ai as useAreaBumpSerieHandlers,di as useAreaBumpSeriesLabels,U as useBump,j as useBumpPointHandlers,X as useBumpSerieHandlers,Y as useBumpSeriesLabels};
//# sourceMappingURL=nivo-bump.mjs.map
